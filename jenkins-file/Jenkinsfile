pipeline {
    agent {
        docker { image 'tb-builder:latest' }
    }
    environment {
        GITLAB_CLASSIC_TOKEN = credentials('a210d2e7-e10f-42a9-8b47-4e471b22e104')
    }

    stages {
        stage('cloning ...') {
            steps {
                git url: "https://${GITLAB_CLASSIC_TOKEN}@github.com/micrommer/things-board-mirror.git", branch: 'main'
            }
        }
        stage('building ...') {
            steps {
                sh 'mvn -T 8 clean install  -DskipTests --fail-at-end -Dlicense.skip=true'
            }
        }
    }
}